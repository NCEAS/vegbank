<?xml version="1.0" encoding="UTF-8"?>
<project name="vegbranch dist loading module doc" default="init" basedir=".">
  <!-- used to create many html files that are used to document vegbranch's loading module -->
  <target name="init">
    <echo>
      Targets: {init} dist-loaddoc clean-locfiles
    </echo>
    <property name="infile" value="loadmodule_doc.xml"/>
    <property name="style" value="loadmodule_doc.xsl"/>
    <property name="newbuildname" value="temp_newbuild.xml"/>
    <property name="newbuild_style" value="loadmod_newbuild.xsl"/>
    <property name="style_noframes" value="loadmodule_doc_noframes.xsl"/>
  </target>
  <!-- builds new build file to distribute html -->
  <target name="dist-loaddoc" depends="init">
    <!-- create new build file to run ant on -->
    <echo>Writing new build file</echo>
    <style out="${newbuildname}" in="${infile}" extension=".xml" style="${newbuild_style}" force="true">
      <!-- file for html to be built from -->
      <param name="infile" expression="${infile}"/>
      <!-- stylesheet for html to be made from  -->
      <param name="style" expression="${style}"/>
      <param name="style_noframes" expression="${style_noframes}"/>
    </style>
    <!-- build on the new build file -->
    <ant antfile="${newbuildname}"/>
  </target>
  <target name="clean-locfiles" depends="init">
    <delete>
      <!-- deletes files like Z_USER_D_CoverData~1_noframes.html (these files temporarily live here, and are copied over to server by the main vegbranch ant function -->
      <fileset dir="./" includes="*_*_*_*~*.html"/>
    </delete>
  </target>
</project>
