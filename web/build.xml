<?xml version="1.0"?>
<!-- 
  * build.xml
	*  '$RCSfile: build.xml,v $'
  *    Authors: @authors@
  *    Release: @release@
  *
  * '$Author: farrell $'
  * '$Date: 2002-11-26 22:15:24 $'
  * '$Revision: 1.24 $'
  *
  *	Authors: John Harris
  *	Copyright: 2002 Regents of the University of California and the
  *							National Center for Ecological Analysis and Synthesis
  *  Build file for the Ant cross-platform build system for bulding the 
	*	 web content for beta.org
	*
  *  See http://jakarta.apache.org for details on Ant  
  *  
  * usage: ant forms, images
--> 
<project name="vegbank_web" default="init" basedir=".">

<target name="init">
	<tstamp/>
	<!-- LET THE USER KNOW THE TARGETS -->
	<echo>
	Targets:  {init} includes, news, panel, history, pubs, forms, general, design,
	dictionary
	</echo>
	<!-- 
		* Below are the basic propoerties and tokens for
		* building the vegbank web site
	-->
	<property name="forms" value="./forms" />
	<property name="general_src" value="./general" />
	<property name="design_src" value="./design" />
	<property name="dictionary_src" value="./dbdictionary" />
	<property name="news_src" value="./news" />
	<property name="panel_src" value="./panel" />
	<property name="history_src" value="./history" />
	<property name="pubs_src" value="./pubs" />
	<property name="style_src" value="./includes" />
	<property name="image_src" value="./images" />
	<filter token="dist" value="dist"/>
	<filter token="version" value="development"/>
	
	<!-- CURRENTLY THESE PARAMETERS ARE SET FOR DISTRIBUT DEVELOPEMENT / PRODUC. SERVER	-->
	<property name="forms_server" value="/usr/local/devtools/jakarta-tomcat/webapps/forms"/>
	<property name="image_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/images"/>
	<property name="general_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/general/"/>
	<property name="design_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/design/"/>
	<property name="dictionary_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/dbdictionary/"/>
	<property name="news_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/news/"/>
	<property name="panel_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/panel/"/>
	<property name="history_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/history/"/>
	<property name="pubs_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/pubs/"/>
	<property name="style_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/includes/"/>
  <property name="vegbank_server" value="/usr/local/devtools/jakarta-tomcat/webapps/vegbank/"/>
	<property name="server_root" value="/usr/local/devtools/jakarta-tomcat/webapps/ROOT/"/>
	
	<!-- WEB SERVER LOCATIONS -->
	<filter token="base_url" value="http://beta.nceas.ucsb.edu"/>
	<filter token="image_server" value="http://beta.nceas.ucsb.edu/vegbank/images/"/>
	<filter token="stylesheet" value="http://beta.nceas.ucsb.edu/vegbank/includes/default.css"/>
	<filter token="plotquery_page" value="http://beta.nceas.ucsb.edu/forms/plot-query.html"/>
	<filter token="nestedplotquery_page" value="http://beta.nceas.ucsb.edu/forms/nested-plot-query.html"/>
	<filter token="uploaddata_page" value="http://beta.nceas.ucsb.edu/forms/uploadFile.html"/>
	<filter token="stylesheet_generator" value="http://beta.nceas.ucsb.edu/forms/stylesheet-generator.html"/>
	<filter token="general_link" value="http://beta.nceas.ucsb.edu/vegbank/general/"/>
	<filter token="panel_link" value="http://beta.nceas.ucsb.edu/vegbank/panel/"/>
	
	
	<!-- SERVLETS -->
	<filter token="stylesheet_generator_servlet" value="http://beta.nceas.ucsb.edu/framework/servlet/stylesheetgenerator"/>
	<filter token="usermanagement_servlet" value="http://beta.nceas.ucsb.edu/framework/servlet/usermanagement"/>
	<filter token="datarequestservlet" value="http://beta.nceas.ucsb.edu/framework/servlet/DataRequestServlet" />
	<filter token="datasubmitservlet" value="http://beta.nceas.ucsb.edu/framework/servlet/DataSubmitServlet" />
	<filter token="nestedquerybuilder" value="http://beta.nceas.ucsb.edu/framework/servlet/QueryBuilderServlet" />
	<filter token="authenticationservlet" value="http://beta.nceas.ucsb.edu/framework/servlet/authenticate" />
	
</target>


<!-- DISTRIBUTES THE INCLUDES (STYLESHHETS, JSCRIPT  ETC..) INTO THE WEBSERVER-->
<target name="includes" depends="init">
        <copy todir="${style_server}" filtering="no" >
                <fileset dir="${style_src}" >    
								<include name="**.css"/>    
        </fileset>
        </copy>
</target>

<target name="index" depends="init" description="target to dist. the index.html file">
	<copy todir="${server_root}" filtering="yes" >
     		<fileset dir="./" >
				<include name="index.html"/>    
        </fileset>
  </copy>
  <!-- add to second webpage at root/vegbank/index.html -->
  <copy todir="${vegbank_server}" filtering="yes" >
          <fileset dir="./" >
          <include name="index.html"/>    
          </fileset>
  </copy>

</target>

<!-- DISTRIBUTE THE IMAGES -->
<target name="images" depends="init">
   <copy todir="${image_server}" filtering="no" >
		<fileset dir="${image_src}" >
		<include name="**"/>
		</fileset>
	</copy>
</target>
																												


<!--
	* TARGET TO BUILD THE NEWS HTML DOCUMENTATION AND DISTRIBUTE IT TO THE
	* WEB SERVER
-->
<target name="news" depends="init">
	<copy todir="${news_server}" filtering="yes" >
		<fileset dir="${news_src}" >    
  	</fileset>
	</copy>
</target>


<!--
	* TARGET TO BUILD THE NEWS HTML DOCUMENTATION AND DISTRIBUTE IT TO THE
	* WEB SERVER
-->
<target name="panel" depends="init">
	<copy todir="${panel_server}" filtering="yes" >
		<fileset dir="${panel_src}" >
		<exclude name="**.pdf"/>    
  	</fileset>
	</copy>
	
	<copy todir="${panel_server}" filtering="no" >
     		<fileset dir="${panel_src}" >
				<exclude name="**.html"/>    
        </fileset>
  </copy>
</target>


<!--
	* TARGET TO BUILD THE NEWS HTML DOCUMENTATION AND DISTRIBUTE IT TO THE
	* WEB SERVER
-->
<target name="history" depends="init">

	<copy todir="${history_server}" filtering="yes" >
     		<fileset dir="${history_src}" >
				<exclude name="**/**.gif"/>    
        </fileset>
  </copy>
	
	<copy todir="${history_server}" filtering="no" >
     		<fileset dir="${history_src}" >
				<exclude name="**/**.html"/>    
        </fileset>
  </copy>

</target>

<!--
	* TARGET TO BUILD THE NEWS HTML DOCUMENTATION AND DISTRIBUTE IT TO THE
	* WEB SERVER
-->
<target name="pubs" depends="init">
	<copy todir="${pubs_server}" filtering="no" >
		<fileset dir="${pubs_src}" >    
  	</fileset>
	</copy>
</target>



<!-- 
	* TARGET TO PUT THE FORMS FOR INTERACTING WITH THE 
	* SERVLETS IN THE APPROPRIATE LOCATION
-->
<target name="forms" depends="init">
	<copydir src="${forms}" 
		dest="${forms_server}" 
		filtering="yes"
		includes="
			nested-plot-query.html
			resultset-download.html
			plot-query.html
			plant-query.html
			plant-name-lookup.html
			utilities.html
			stylesheet-generator.html
			community-submit.html
			community-submit_valid.html
			community-correlate.html
			community-query.html
			plot-submit.html
			plot-upload.html
			plot-submit-select.html
			fetch-password.html
		 	hints.html
			plant-submit.html
			plant-submit-template.html
		 	plant-submit_valid.html
			sw-download.html
			redirection_template.html 
			certification.html
			certification_valid.html
			generic_form.html
			user_update_form.html
			submit-plantname-init.html
			submit-plantname-rectification.html
			submit-plantname-reference.html
			submit-plantconcept.html
			submit-plantstatususage.html
			submit-plantcorrelation.html
			submit-plantsubmittal-receipt.html"
		excludes="**/CVS* "
	/>

</target>


<!-- 
	* TARGET TO PUT THE GENERAL HTML DOCS INTO THE CORRECT PLACE
-->
<target name="general" depends="init">
	<copydir src="${general_src}" 
		dest="${general_server}" 
		filtering="yes"
		includes="**.html"
		excludes="**/CVS* "
	/>
</target>



<!-- 
	* TARGET TO PUT THE DESIGN HTML DOCS INTO THE CORRECT PLACE
-->
<target name="design" depends="init">
	<copy todir="${design_server}" filtering="no" >
		<fileset dir="${design_src}" >    
  	</fileset>
	</copy>
</target>


<!-- 
	* TARGET TO PUT THE DICTIONARY HTML DOCS INTO THE CORRECT PLACE
-->
<target name="dictionary" depends="init">
	<copy todir="${dictionary_server}" filtering="no" >
		<fileset dir="${dictionary_src}" >    
  	</fileset>
	</copy>
</target>

<!-- 
	* TARGET TO DISTRIBUTE ALL HTML, IMAGES, JAVASCRIPT AND CSS  
	INTO THE CORRECT PLACE
-->
<target name="dist" depends="	index, design, forms, general, 
													history, includes, init, news, panel, pubs"/>
<!-- FIXME dictionary, images target expects files not in cvs -->



</project>
