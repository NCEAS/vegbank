<?xml version="1.0"?>
<!-- 
  * build.xml
  *
  *  Authors: John Harris
  *  Copyright: 2000 Regents of the University of California and the
  *               National Center for Ecological Analysis and Synthesis
  *  Build file for the Ant cross-platform build system for metacat
  *  See http://jakarta.apache.org for details on Ant  
  *  
  * This build file compiles all the classes in the utility module
  * which consistes of tools for working with plots database
  *
  * usage: ant [compile|jar|install|jdoc]
--> 
<project name="plotLoader" default="dist" basedir=".">
	<target name="init">
	<tstamp/>
  <property name="current" value="./" />
	<property name="build" value="build" />
	<property name="build_src" value="build/src/utilities" />
	<property name="build_lib" value="build/lib" />
	<property name="build_xml" value="build/xml" />
	<property name="build_bin" value="build/bin" />
	<property name="build_data" value="build/data" />
	
	<property name="src" value="./utilities"/>
	<property name="src_bin" value="../bin" />
	<property name="src_xml" value="../xml" />
	<property name="src_lib" value="../lib" />
	<property name="dbaccess_src" value="./plotAccess" />
	



	<property name="data" value="../plotData/tncData"/>
	<property name="dbAccess_src" value="./plotAccess"/>
	<property name="xmlp" value="${src_lib}/xalan_1_2_2.jar:${src_lib}/xerces_1_3_1.jar:" />
	<property name="jdbc" value="" />
	<property name="cpath" 
		value="${servlet_home}:${xmlp}:${jdbc}:${jserv}:${jsdk}:${build}:${localToolsDir}:./"/>
</target>

<target name="prepare" depends="init">
	<mkdir dir="${build}" />
	<mkdir dir="${build_src}" />
	<mkdir dir="${build_lib}" />	
	<mkdir dir="${build_bin}" />
	<mkdir dir="${build_xml}" />
	
	<copydir src="${src}" 
		dest="${build_src}" 
   	filtering="no"
    includes="**.java tncPlots.properties"
    excludes="**/CVS* "
	/>

<!-- copy just the relevant executable files -->
	<copydir src="${src_bin}" 
		dest="${build_bin}" 
   	filtering="yes"
    includes="loadTNCPlots.sh"
    excludes="**/CVS* "
	/>

	<copydir src="${dbaccess_src}" 
		dest="${build_src}" 
    filtering="yes"
    includes="dbConnect.java"
    excludes="**/CVS* "
	/>

	 
	 <!--
	 	* Copy to the build directory 
		*	some of the sample data 
	-->
	 <copydir src="${data}" 
    dest="${build_data}" 
    filtering="no"
    includes="tncSampleSpeciesInput  tncSamplePlotsInput"
		excludes="**/CVS* "
	/>
	
</target>	
	
<target name="compile" depends="prepare">


<javac srcdir="${build_src}" 
		classpath="${cpath}"
		includes="**.java  " 
		destdir="${build_src}"
/>
	
</target>	
	
	
<target name="dist" depends="compile">
	
	<!--
		* jar the utility libarary
		* and put into the lib directory
		-->
	<jar jarfile ="${build_lib}/utility.jar"
		basedir="${build_src}"
		manifest="${src_lib}/manifest"
		includes="${build_src}/ **"
	/>

	<!-- test the tnc conversion tool-->
<!--
	<java classname="TncConverter"
		args="${build_data}/tncSamplePlotsInput ${build_data}/tncSampleSpeciesInput"
    classpath="${cpath}:${build_lib}/utility.jar"
    fork="yes"
	/>
-->
	
</target>		
</project>
