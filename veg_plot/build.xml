<?xml version="1.0"?>
<!-- 
  * build.xml
  *
  * Global build script for veg_plot. This simply allows running all the sub 
  * scripts from one place 
  *
  *     '$Author: farrell $'
  *     '$Date: 2002-12-06 18:40:55 $'
  *     '$Revision: 1.4 $'
--> 
<project name="veg_plot" default="compile" basedir=".">

	<property name="servlet_lib" value="/usr/local/devtools/jakarta-tomcat/webapps/framework/WEB-INF/lib/" />
    <property name="target" value="${target}" />
      
	<target name="compile" description="Compiles all code in veg_plot module">
		<echo message="Compiling all of ${ant.project.name}"/>
		<ant dir="exp/client_installer" target="compile"/>
		<ant dir="exp/database_access" target="compile"/>
		<ant dir="exp/data-translators" target="compile"/>
		<ant dir="exp/rmidatasource" target="compile"/> 
		<ant dir="exp/services" target="compile"/>
		<ant dir="exp/servlet" target="compile"/>
		<ant dir="exp/vegclient" target="compile"/>
		<ant dir="exp/xml-resource" target="compile"/>
		<ant dir="exp/xml_to_sql" target="compile"/>
	</target>
	
	<target name="jar" description="Generates all jars in veg_plot module">
		<echo message="Creating all of jars in ${ant.project.name}"/>
		<ant dir="exp/database_access" target="dist"/> <!-- Change this target name -->
		<ant dir="exp/data-translators" target="jar"/>
		<ant dir="exp/rmidatasource" target="jar"/> 
		<ant dir="exp/services" target="jar"/>
		<ant dir="exp/servlet" target="jar"/>
		<!--<ant dir="exp/vegbank_web" target="jar"/>-->
		<ant dir="exp/vegclient" target="jar"/>
		<ant dir="exp/xml-resource" target="jar"/>
		<ant dir="exp/xml_to_sql" target="jar"/>
	</target>
	
	<target name="deploy" description="Deploys jars in veg_plot module to servlet container">
		<echo message="Distr all of jars in ${ant.project.name}"/>
		<ant dir="exp/database_access" target="dist-web"/> 
		<ant dir="exp/data-translators" target="dist"/>
		<ant dir="exp/rmidatasource" target="dist"/> 
		<!-- <ant dir="exp/services" target="jar"/> No dist target -->
		<ant dir="exp/servlet" target="dist"/>
		<ant dir="exp/vegbank_web" target="dist"/>
		<!-- FIXME <ant dir="exp/vegclient" target="dist"/>  target fails to build -->
		<!-- <ant dir="exp/xml-resource" target="dist"/> No dist target -->
		<!-- <ant dir="exp/xml_to_sql" target="jar"/> No dist target -->
		<antcall target="deploy-resources"/>
	</target>

	<target name="deploy-resources" description="Deploy resources to servlet container">
		<!-- Copy xml resources to servlet container -->
		<copy todir="${servlet_lib}">
			<fileset dir="xml" includes="querySpec.xsl, plotQuery.dtd"/>
		</copy>
		<copy file="src/utilities/coord_transform.sh" todir="${servlet_lib}"/>
	</target>

	<target name="clean" description="Remove all generated files">
		 <ant dir="exp/client_installer" target="clean"/>
		<ant dir="exp/database_access" target="clean"/>
		<ant dir="exp/data-translators" target="clean"/>
		<ant dir="exp/rmidatasource" target="clean"/> 
		<ant dir="exp/services" target="clean"/>
		<ant dir="exp/servlet" target="clean"/>
		<ant dir="exp/vegclient" target="clean"/>
		<ant dir="exp/xml-resource" target="clean"/>
		<ant dir="exp/xml_to_sql" target="clean"/>
	</target>
	<!-- Want to pass command line variables in ant but no working yet	
	<target name="database_access">
		<echo message="Going to call ${target} "/>
		<ant dir="exp/database_access" target="${target}"/>		
	</target>
	-->
	
</project>

